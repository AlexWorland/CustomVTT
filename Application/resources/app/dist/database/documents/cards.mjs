import ServerDocumentMixin from"../backend/server-document.mjs";import BaseCards from"../../../common/documents/cards.mjs";export default class Cards extends(ServerDocumentMixin(BaseCards)){static async migrateSystem(){globalThis.logger.info("Migrating Cards documents to the latest game system data model.");const e=await this.find({});for(let t of e)try{t.updateSource({system:t.migrateSystemData()});for(let e of t.cards)e.updateSource({system:e.migrateSystemData()});await this.db.updateOne({_id:t.id},t.toObject())}catch(e){globalThis.logger.error(e)}globalThis.logger.info(`Successfully migrated ${e.length} Cards documents.`)}}