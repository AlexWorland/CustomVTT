import View from"./view.mjs";export default class GameView extends View{route="/game";_template="game";_methods=["get"];async handleGet(e,t){const{db:r,game:o,logger:s}=global;if(!o.world)return this._noWorld(e,t);if(!e.user)return t.redirect(`${e.baseUrl}/join`);if(!await r.User.get(e.user))return s.error(Error(`User ${e.user} not found!`)),t.redirect(`${e.baseUrl}/join`);const i=await r.Setting.getValue("core.moduleConfiguration")||{},a=View._getStaticContent({world:!0,moduleConfig:i});t.render(this._template,{scripts:a.scripts,styles:a.styles})}}